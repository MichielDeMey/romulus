apiVersion: v1
kind: Service
metadata:
  name: fourFiveSix
  namespace: test
  uid: ba2e58f0-3254-11e5-8d84-06dd91247d89
  resourceVersion: '12356'
  annotations:
    romulus/host: www.example.com
    romulus/path.api: '/api/v1'
    romulus/path.web: '/blog'
    romulus/middleware.api.rateLimit: '{"Priority":0,"Type":"ratelimit","Middleware":{"Requests":1,"PeriodSeconds":1,"Burst":3,"Variable": "client.ip"}}'
    romulus/middleware.api.connLimit: '{"Priority": 0, "Type": "connlimit", "Middleware":{"Connections":16, "Variable": "client.ip"}}'
    romulus/middleware.https: '{"Priority":1,"Type":"rewrite","Middleware":{"Regexp":"^http://(.*)","Replacement":"https://$1","RewriteBody":false,"Redirect":true}}'
    romulus/middleware.web.cb1: '{"Priority":1,"Type":"cbreaker","Middleware":{
                "Condition":"NetworkErrorRatio() > 0.5",
                "Fallback":{"Type": "response", "Action": {"StatusCode": 400, "Body": "Come back later"}},
                "FallbackDuration": 10000000000,
                "RecoveryDuration": 10000000000,
                "CheckPeriod": 100000000
             }
           }'
  labels:
    name: fourFiveSix
    namespace: test
    romulus/type: public
spec:
  type: ClusterIP
  clusterIP: 9.8.7.6
  ports:
    - name: api
      port: 1234
      protocol: TCP
    - name: web
      port: 8888
      protocol: TCP
